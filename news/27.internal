Add type hints and check codebase with `mypy`